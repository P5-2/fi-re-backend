<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="fi.re.firebackend.dao.finance.savings.SavingsV1Dao">

    <select id="getSavingsByCode" resultType="fi.re.firebackend.dto.finance.savings.SavingsDepositDto">
        SELECT finPrdtCd, bankName AS korCoNm, finPrdtNm, joinWay, spclCnd, joinMember, etcNote, maxLimit, intrRateTypeNm, saveTrm, minRate AS intrRate, maxRate AS intrRate2 FROM savingsV1 WHERE finPrdtCd = #{finPrdtCd}
    </select>

    <select id="getHotSavings" resultType="fi.re.firebackend.dto.finance.savings.SavingsDepositDto">
        SELECT finPrdtCd, bankName AS korCoNm, finPrdtNm, joinWay, spclCnd, joinMember, etcNote, maxLimit, intrRateTypeNm, saveTrm, minRate AS intrRate, maxRate AS intrRate2 FROM savingsV1 ORDER BY selectCount DESC LIMIT 3
    </select>

    <select id="getAllSavings" resultType="fi.re.firebackend.dto.finance.savings.SavingsDepositDto">
        SELECT finPrdtCd, bankName AS korCoNm, finPrdtNm, joinWay, spclCnd, joinMember, etcNote, maxLimit, intrRateTypeNm, saveTrm, minRate AS intrRate, maxRate AS intrRate2 FROM savingsV1
    </select>

<!--    페이지네이션-->
    <select id="selectSavings" resultType="fi.re.firebackend.dto.finance.savings.SavingsDepositDto">
        SELECT *
        FROM savingsV1
        ORDER BY finprdtCd
            LIMIT #{size} OFFSET #{offset}
    </select>

    <select id="countSavings" resultType="int">
        SELECT COUNT(*)
        FROM savingsV1
    </select>

    <!-- 비교함 추가 및 삭제 -->
    <update id="updateSavingsCartStatus">
        UPDATE savingsV1 SET InCart = #{InCart} WHERE finPrdtCd = #{finPrdtCd}
    </update>

    <!-- 비교함 목록 조회 -->
    <select id="getSavingsInCart" resultType="fi.re.firebackend.dto.finance.savings.SavingsDepositDto">
        SELECT finPrdtCd, bankName AS korCoNm, finPrdtNm, joinWay, spclCnd, joinMember, etcNote, maxLimit, intrRateTypeNm, saveTrm, minRate AS intrRate, maxRate AS intrRate2 FROM savingsV1 WHERE InCart = 1
    </select>

    <!-- 현재 비교함 상태를 가져오는 쿼리 -->
    <select id="getSavingsCartStatus" resultType="int">
        SELECT InCart FROM savingsV1 WHERE finPrdtCd = #{finPrdtCd}
    </select>

</mapper>
